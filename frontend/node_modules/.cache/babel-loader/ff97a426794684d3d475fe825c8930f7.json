{"ast":null,"code":"import _classCallCheck from \"/Users/madhusudansaha/MS/Spring_2019/526-Blockchain/Projects/Project1/msahaLab1/part1/consortium/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/madhusudansaha/MS/Spring_2019/526-Blockchain/Projects/Project1/msahaLab1/part1/consortium/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/madhusudansaha/MS/Spring_2019/526-Blockchain/Projects/Project1/msahaLab1/part1/consortium/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/madhusudansaha/MS/Spring_2019/526-Blockchain/Projects/Project1/msahaLab1/part1/consortium/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/madhusudansaha/MS/Spring_2019/526-Blockchain/Projects/Project1/msahaLab1/part1/consortium/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/madhusudansaha/MS/Spring_2019/526-Blockchain/Projects/Project1/msahaLab1/part1/consortium/src/components/productList.jsx\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Product from \"./product\";\n\nvar ProductList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProductList, _Component);\n\n  function ProductList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ProductList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ProductList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      productsToBuy: [],\n      transactions: [],\n      deposit: 0\n    };\n\n    _this.buyProduct = function (product, username) {\n      var obj = {};\n      obj.username = username;\n      obj.productId = product.productId;\n      obj.name = product.name;\n      obj.price = product.price;\n      obj.description = product.description;\n      obj.owner = product.owner;\n      axios({\n        method: 'post',\n        url: 'http://localhost:4000/consortium/buy',\n        data: obj,\n        config: {\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }\n      }).then(function (res) {\n        _this.setState(function (prevState) {\n          var productsToBuy = prevState.productsToBuy.filter(function (p) {\n            return p.productId !== product.productId;\n          });\n          return {\n            productsToBuy: productsToBuy\n          };\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    _this.listProducts = function (username, page, buyProduct) {\n      return _this.state.productToBuy.map(function (currentProduct, i) {\n        if (username !== currentProduct.owner) {\n          return React.createElement(Product, {\n            page: page,\n            product: currentProduct,\n            username: username,\n            key: i,\n            buyProduct: buyProduct,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 61\n            },\n            __self: this\n          });\n        }\n      });\n    };\n\n    _this.handleDeposit = function (text) {\n      _this.setState({\n        deposit: text.target.value\n      });\n    };\n\n    _this.listTransactions = function (username) {\n      return _this.state.transactions.map(function (currentTransaction, i) {\n        if (username === currentTransaction.buyer) {\n          return React.createElement(Transaction, {\n            transaction: currentTransaction,\n            key: i,\n            settlePayment: settlePayment,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 78\n            },\n            __self: this\n          });\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ProductList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get('http://localhost:4000/consortium/products').then(function (products) {\n        _this2.setState({\n          productsToBuy: products.data\n        });\n\n        axios.get('http://localhost:4000/consortium/transactions').then(function (trans) {\n          _this2.setState({\n            transactions: transactions.data\n          });\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"Products to buy\"), React.createElement(\"table\", {\n        className: \"table table-striped\",\n        style: {\n          marginTop: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"ID\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"Name\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"Price\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"Description\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"Seller\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, this.listProducts(this.props.props.username, this.props.props.page, this.buyProduct))), React.createElement(\"div\", {\n        className: \"form-inline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"deposit\",\n        className: \"col-form-label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"Deposit: \"), React.createElement(\"input\", {\n        type: \"number\",\n        placeholder: \"Enter deposit: \",\n        id: \"deposit\",\n        className: \"form-control\",\n        onChange: function onChange(text) {\n          return _this3.handleDeposit(text);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"btn btn-primary btn-sm m-2\",\n        onClick: function onClick() {\n          return _this3.props.depositMoney(_this3.props.props.username, _this3.state.deposit);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"Deposit\")), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"Transactions to settle\"), React.createElement(\"table\", {\n        className: \"table table-striped\",\n        style: {\n          marginTop: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"Creditor\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Amount\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Product\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, this.listTransactions(this.props.props.username, this.settlePayment))));\n    }\n  }]);\n\n  return ProductList;\n}(Component);\n\nexport { ProductList as default };","map":{"version":3,"sources":["/Users/madhusudansaha/MS/Spring_2019/526-Blockchain/Projects/Project1/msahaLab1/part1/consortium/src/components/productList.jsx"],"names":["React","Component","axios","Product","ProductList","state","productsToBuy","transactions","deposit","buyProduct","product","username","obj","productId","name","price","description","owner","method","url","data","config","headers","then","res","setState","prevState","filter","p","catch","error","console","log","listProducts","page","productToBuy","map","currentProduct","i","handleDeposit","text","target","value","listTransactions","currentTransaction","buyer","settlePayment","get","products","trans","marginTop","props","depositMoney"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n\nimport Product from \"./product\";\n\nexport default class ProductList extends Component {\n\n    state = {\n\tproductsToBuy: [],\n\ttransactions: [],\n\tdeposit: 0\n    };\n\n    componentDidMount() {\n\taxios.get('http://localhost:4000/consortium/products')\n\t    .then(products => {\n\t\tthis.setState({productsToBuy: products.data});\n\t\t\n\t\taxios.get('http://localhost:4000/consortium/transactions')\n\t\t    .then(trans => {\n\t\t\tthis.setState({transactions: transactions.data});\n\t\t    })\n\t\t    .catch(function (error){\n\t\t\tconsole.log(error);\n\t\t    })\t\t\n\t    })\n\t    .catch(function (error){\n                console.log(error);\n\t    })\t\n    }\n\n    buyProduct = (product, username) => {\n\tlet obj = {};\n\tobj.username = username;\n\tobj.productId = product.productId;\n\tobj.name = product.name;\n\tobj.price = product.price;\n\tobj.description = product.description;\n\tobj.owner = product.owner;\n\t\n\taxios({\n\t    method: 'post',\n\t    url: 'http://localhost:4000/consortium/buy',\n\t    data: obj,\n\t    config: { headers: {'Content-Type': 'application/json' }}\n\t})\n\t    .then(res => {\n\t\tthis.setState(prevState => {\n\t\t    const productsToBuy = prevState.productsToBuy.filter(p => p.productId !== product.productId);\n\t\t    return { productsToBuy };\n\t\t});\n\t    })\n\t    .catch(function (error){\n                console.log(error);\n\t    })\t\n    }\n    \n    listProducts = (username, page, buyProduct) => {\n        return this.state.productToBuy.map(function(currentProduct, i){\n\t    if(username !== currentProduct.owner) {\n\t\treturn <Product\n\t\tpage={page}\n\t\tproduct={currentProduct}\n\t\tusername={username}\n\t\tkey={i}\n\t\tbuyProduct={buyProduct} />;\n\t    }\n        })\n    }\n\n    handleDeposit = (text) => {\n\tthis.setState({deposit: text.target.value})\n    }\n\n    listTransactions = (username) => {\n        return this.state.transactions.map(function(currentTransaction, i){\n\t    if(username === currentTransaction.buyer) {\n\t\treturn <Transaction\n\t\ttransaction={currentTransaction}\n\t\tkey={i}\n\t\tsettlePayment={settlePayment} />;\n\t    }\n        })\n    }\n\n    render() {\n        return (\n\t    <div>\n              <h3>Products to buy</h3>\n              <table className=\"table table-striped\" style={{ marginTop: 20 }} >\n                <thead>\n                  <tr>\n\t\t    <th>ID</th>\n                    <th>Name</th>\n                    <th>Price</th>\n                    <th>Description</th>\n                    <th>Seller</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  { this.listProducts(this.props.props.username, this.props.props.page, this.buyProduct) }\n                </tbody>\n              </table>\n\t      \n\t      <div className=\"form-inline\">\n\t      <label htmlFor=\"deposit\" className=\"col-form-label\">Deposit: </label>\n\t      <input type=\"number\" placeholder=\"Enter deposit: \" id=\"deposit\" className=\"form-control\" onChange={(text) => this.handleDeposit(text)} />\n\t\t<button className=\"btn btn-primary btn-sm m-2\" onClick={() => this.props.depositMoney(this.props.props.username, this.state.deposit)}>Deposit</button>\n\t      </div>\n\n\t      <h3>Transactions to settle</h3>\n              <table className=\"table table-striped\" style={{ marginTop: 20 }} >\n                <thead>\n                  <tr>\n\t\t    <th></th>\n                    <th>Creditor</th>\n                    <th>Amount</th>\n                    <th>Product</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  { this.listTransactions(this.props.props.username, this.settlePayment) }\n                </tbody>\n              </table>\n\t      \n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}